{% extends "admin/change_list.html" %}
{% load recreation_extras %}
{% load static %}

<!-- [핵심 수정] 관리자 페이지의 기본 CSS를 불러오는 코드를 추가합니다. -->
{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/changelists.css' %}">
    <style>
        #result_list { width: 100%; }
        #result_list th, #result_list td { text-align: center; padding: 8px; }
    </style>
{% endblock %}

{% block object-tools-items %}
    {{ block.super }}
    <li>
        <a href="{% url 'admin:recreation_teamschedule_auto_generate' %}" class="addlink" style="background-color: #28a745;">
            팀별 스케줄 자동 생성하기
        </a>
    </li>
{% endblock %}

{% block result_list %}
<div class="results">
    <h2>팀별 이동 경로표</h2>
    <table id="result_list">
        <thead>
            <tr>
                <th>팀 이름</th>
                {% for timeslot in timeslots %}
                <th>{{ timeslot.round_number }}라운드 ({{ timeslot.start_time|time:"H:i" }})</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for team in teams %}
            <tr class="{% cycle 'row1' 'row2' %}">
                <td>{{ team.team_name }}</td>
                {% for timeslot in timeslots %}
                <td>{{ schedule_data|get_item:team.team_name|get_item:timeslot.round_number }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<p class="paginator" style="margin-top: 1rem;">위 표는 참고용이며, 실제 데이터는 아래 목록에 표시됩니다.</p>
{{ block.super }}
{% endblock %}